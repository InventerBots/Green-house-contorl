import socket

class TCPServer:
    def __init__(self, host='192.168.1.200', port=10004):
        self.host = host
        self.port = port
        self.server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        self.server_socket.bind((self.host, self.port))
        self.server_socket.listen(5)

    def connect(self):
        print('Server listening on {}:{}'.format(self.host, self.port))
        while True:
            client_socket, client_address = self.server_socket.accept()
            print('Connected to {}:{}'.format(*client_address))
            data = client_socket.recv(1024)
            if not data:
                break
            client_socket.sendall(data)
            client_socket.close()

    def disconnect(self):
        print('Server shutting down')
        self.server_socket.close()

if __name__ == '__main__':
    server = TCPServer()
    try:
        server.connect()
    except KeyboardInterrupt:
        server.disconnect()